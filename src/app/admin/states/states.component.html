<app-admin-topbar></app-admin-topbar>
<app-sidebar></app-sidebar>
<div class="mn_dshbrd">
    <div class="cust_mdl_par cust_mdl_50p" [ngClass]="{ cust_mdl_opn: model_status }">
        <div class="cust_mdl_chl">
            <div class="pg_ttl">Add New State
                <span class="spacer"></span>
                <button mat-icon-button (click)="toggleModel()" class="float_right">&#x2715;</button>
            </div>
            <div class="tbbd_bdy">

                <div class="hgt_20"></div>
                <form>
                    <div class="grd_2c no_bxsdw">

                        <div class="hgt_20"></div>
                        <div class="frm_dvs">
                            <span>
                                Browse States CSV
                            </span>
                            <span>
                                <mat-form-field appearance="outline">
                                    <input matInput placeholder="Browse File to Upload" />
                                </mat-form-field>
                                <button mat-raised-button color="accent" class="ml_1">Browse</button>
                            </span>
                        </div>
                        <div class="frm_dvs">
                            <span>&nbsp;</span>
                            <span class="bold">[ OR ]</span>
                        </div>
                        <div class="frm_dvs">
                            <span>
                                State Name<span class="required">*</span>
                            </span>
                            <span>
                                <mat-form-field appearance="outline">
                                    <input matInput placeholder="State Name" [(ngModel)]="state_name" name="state_name_name" #state_name_name="ngModel" maxlength="90" required />
                                </mat-form-field>
                            </span>
                        </div>

                    </div>
                    <hr>
                    <button mat-raised-button color="accent" class="float_right mr_1" (click)="saveState()">Save</button>
                </form>
                <button mat-raised-button class="float_right mr_1 gry_btn" (click)="toggleModel()">Cancel</button>
                <div class="hgt_20"></div>
            </div>

        </div>
    </div>

    <div class="cust_mdl_par cust_mdl_50p" [ngClass]="{ cust_mdl_opn: model_state_status }">
        <div class="cust_mdl_chl">
            <div class="pg_ttl">Edit State
                <span class="spacer"></span>
                <button mat-icon-button (click)="toggleStateModel()" class="float_right">&#x2715;</button>
            </div>
            <div class="tbbd_bdy">

                <div class="hgt_20"></div>
                <form>
                    <div class="grd_2c no_bxsdw">
                        <div class="frm_dvs">
                            <span>
                                State Name<span class="required">*</span>
                            </span>
                            <span>
                                <mat-form-field appearance="outline">
                                    <input matInput placeholder="State Name" [(ngModel)]="state_name" name="state_name_name" #state_name_name="ngModel" maxlength="90" required />
                                </mat-form-field>
                            </span>
                        </div>

                    </div>
                    <hr>
                    <button mat-raised-button color="accent" class="float_right mr_1" (click)="updateState()">Save</button>
                </form>
                <button mat-raised-button class="float_right mr_1 gry_btn" (click)="toggleStateModel()">Cancel</button>
                <div class="hgt_20"></div>
            </div>

        </div>
    </div>


    <div class="brd_crm">Proceum &raquo; <strong>Countries/States</strong></div>
    <div class="pg_ttl">States</div>
    <hr />
    <div class="dsh_brd_crds">
        <mat-form-field appearance="outline">
            <input matInput placeholder="Search" />
            <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
        <button mat-raised-button color="accent" class="float_right mt_0" type="button" (click)="toggleModel()">
            Add New State
        </button>
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
            <ng-container matColumnDef="s_no">
                <th mat-header-cell *matHeaderCellDef> S.No </th>
                <td mat-cell *matCellDef="let element"> {{element.s_no}} </td>
            </ng-container>
            <ng-container matColumnDef="state_name">
                <th mat-header-cell *matHeaderCellDef> State </th>
                <td mat-cell *matCellDef="let element"> 
                    <span (click)="navigateTo(element.country_id,element.state_id)" class="lnk_nav">{{element.state_name}}</span>
                </td>
            </ng-container>
            <ng-container matColumnDef="country_name">
                <th mat-header-cell *matHeaderCellDef> Country </th>
                <td mat-cell *matCellDef="let element"> {{element.country_name}} {{element.country_code}} </td>
            </ng-container>
            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef> Status </th>
                <td mat-cell *matCellDef="let element">
                <mat-icon matTooltip='Current Status is {{ element.status == 1 ? "ACTIVE" : "IN-ACTIVE"}}' class='{{ element.status == 1 ? "sts_grn" : "sts_rd" }}' >{{ element.status == 1 ? "check_circle" : "cancel" }}</mat-icon></td>
            </ng-container>
            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef> Action </th>
                <td mat-cell *matCellDef="let element">  
                    <button mat-icon-button >
                    <mat-icon matTooltip='click here to edit State' (click)="openEditModel(element)">edit</mat-icon>
                    </button>
                    <button mat-icon-button (click)="changeStatus(element.state_id,'ST')">
                        <mat-icon matTooltip='click here to {{ element.status == 1 ? "IN-ACTIVE" : "ACTIVE"}}' >{{ element.status == 1 ? "visibility" : "visibility_off"}}</mat-icon>
                    </button>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            <tr class="mat-row" *matNoDataRow>
                <td style="text-align: center; margin: 20px" class="mat-cell" colspan="6">No Records Found</td>
              </tr>
        </table>
        <mat-paginator #paginator [pageSize]="pageSize" [length]="num_states"
        [pageSizeOptions]="[5, 10, 20]" [showFirstLastButtons]="true" (page)="getServerData($event)"></mat-paginator>
    </div>
</div>
<app-admin-footer></app-admin-footer>