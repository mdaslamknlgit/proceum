<app-admin-topbar></app-admin-topbar>
<app-sidebar></app-sidebar>
<div class="mn_dshbrd">
  <div class="cust_mdl_par" [ngClass]="{ cust_mdl_opn: model_status }">
    <div class="cust_mdl_chl">
      <button mat-icon-button (click)="toggleModel()" color="accent" class="float_right">
        <mat-icon>close</mat-icon>
      </button>
      <div class="tbbd_bdy">
        <form
          id="step_form"
          #step_form="ngForm"
          name="step_form"
          (ngSubmit)="step_form.valid && createStep()"
          novalidate
        >
          <div class="pg_ttl">Create {{ step }}</div>
          <div
            class="tbbd_bdy_cnt inp_par_dv"
            [ngClass]="{
              err_tltp_par: step_form.submitted && step_name_name.invalid
            }"
          >
            {{ step }} Name
            <input
              matInput
              [(ngModel)]="step_name"
              #step_name_name="ngModel"
              name="step_name_name"
              type="text"
              placeholder="Provide {{ step }} Name"
              required
            />
            <span
              class="prc_tltp"
              *ngIf="step_form.submitted && step_name_name.invalid"
            >
              {{ step }} Name is required</span
            >
          </div>
          <div>
            {{ step }} Code
            <input
              matInput
              [(ngModel)]="step_code"
              #step_name_code="ngModel"
              name="step_name_code"
              type="text"
              placeholder="Provide {{ step }} Code"
            />
            <!-- <span
              class="prc_tltp"
              *ngIf="step_form.submitted && step_name_code.invalid"
            >
              {{ step }} Name is required</span
            > -->
          </div>
          <button mat-raised-button color="accent">Submit</button>
        </form>
      </div>
    </div>
  </div>
  <div class="brd_crm">
    Proceum&raquo; Curriculum &raquo;<span
      *ngFor="let prev of prev_steps"
      routerLink="/admin/curriculum/{{ step_id }}/{{ prev['level_number'] }}"
      >{{ prev["display_label"] }} &raquo;</span
    >
    <strong>{{ step }}</strong>
  </div>
  <div class="pg_ttl">{{ step }}s</div>
  <hr />
  <div class="dsh_brd_crds">
    <mat-form-field appearance="none">
      <input matInput type="text" (keyup)="doFilter($event.target.value)" placeholder="Search" />
    </mat-form-field>

    <button
      mat-raised-button
      color="accent"
      class="float_right"
      (click)="toggleModel()"
      type="button"
    >
      New {{ step }}
    </button>
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>No.</th>
        <td mat-cell *matCellDef="let element">
          {{ element.id }}
        </td>
      </ng-container>

      <ng-container matColumnDef="Name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ step }} Name
        </th>
        <td mat-cell *matCellDef="let element">
          <span (click)="navigateTo(element.step_id)">{{ element.name }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let element">
          {{ element.status == 1 ? "Active" : "In Activated" }}
        </td>
      </ng-container>

      <ng-container matColumnDef="created_at">
        <th mat-header-cell *matHeaderCellDef>Created Date</th>
        <td mat-cell *matCellDef="let element">{{ element.created_at }}</td>
      </ng-container>

      <!-- Symbol Column -->
      <ng-container matColumnDef="updated_at">
        <th mat-header-cell *matHeaderCellDef>Updated Date</th>
        <td mat-cell *matCellDef="let element">{{ element.updated_at }}</td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let element">
          <button mat-icon-button (click)="editStep(element)">
            <mat-icon>edit</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons (page)="getServerData($event)"></mat-paginator>
  </div>
</div>
<div class="cust_mdl_par" [ngClass]="{ cust_mdl_opn: edit_model_status }">
  <div class="cust_mdl_chl">
    <button mat-icon-button (click)="edit_model_status = !edit_model_status" color="accent" class="float_right">
      <mat-icon>close</mat-icon>
    </button>
    <div class="tbbd_bdy">
      <form
        id="edit_step_form"
        #edit_step_form="ngForm"
        name="edit_step_form"
        (ngSubmit)="edit_step_form.valid && updateStep()"
        novalidate
      >
        <div class="pg_ttl">Edit Curriculum</div>
        <div
          class="tbbd_bdy_cnt inp_par_dv"
          [ngClass]="{
            err_tltp_par: edit_step_form.submitted && step_name == ''
          }"
        >
          Curriculum Name
          <input
            matInput
            [(ngModel)]="step_name"
            #step_name_name="ngModel"
            name="step_name_name"
            type="text"
            placeholder="Provide Curiculum Name"
            required
          />
          <span
            class="prc_tltp"
            *ngIf="edit_step_form.submitted && step_name_name.invalid"
          >
            Curriculum Name is required</span
          >
        </div>
        <button mat-raised-button color="accent">Submit</button>
      </form>
    </div>
  </div>
</div>

<app-admin-footer></app-admin-footer>