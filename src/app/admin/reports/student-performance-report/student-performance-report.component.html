<div class="mn_dshbrd">
    <div class="cust_mdl_par {{ subject_know_popup ? 'cust_mdl_opn' : '' }}">
        <div class="cust_mdl_chl w_60p">
            <div class="pg_ttl">
                <div>{{"admin.report.sudt_rpt.subject_knowledge"|translate}}</div> 
                <span class="spacer"></span>
                <button (click)="subject_know_popup=false" mat-icon-button class="float_right">
                    &#x2715;
                </button>
            </div>

            <div class="sdmu_ppdv">
                <div class="intr_vd_tml _admn_ds_accrd_mn w_100p">
                    <div class="dsbrd_admnaccrdn w_100p">
                      <div class="_admn_dv_mn sknow_aa">
                        <div class="_dv_cnt _clr_one" *ngFor="let d_sk of this.subjectknowledge |keyvalue">
                          <div *ngFor="let data of d_sk.value |keyvalue">
                            <div *ngFor="let percent of data.value |keyvalue">
                              <div class="_db_icn">
                                <mat-icon>auto_stories</mat-icon>
                              </div>
                              <span class="_cnt_two">{{data.key}}</span>
                              <div class="prg_div">
                                <span class="prg_sp">
                                  <mat-progress-bar class="prg_clr" color="primary" mode="determinate"
                                    value="{{percent.value}}">
                                  </mat-progress-bar>
                                </span>
                                <span class="cnt_sp">{{percent.value}}/100</span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="brd_crm">{{"proceum_text"|translate}} &raquo; <strong>{{"admin.side_menu.student_performance"|translate}}</strong></div> 
    
    <div class="d-flex rsp_fw">
        <div class="pg_ttl">{{"admin.side_menu.student_performance"|translate}}</div>
        <div class="spacer"></div>
    </div>
    <hr />
    <div>
        <div class="cm_fltr_sc mr_1">
            <span>{{"organization_type"|translate}} <span class="required">*</span></span>
            <mat-form-field appearance="outline" class="w_100p">
                <mat-select placeholder='{{"select"|translate}} {{"organization_type"|translate}}'
                    name="organization_edit" #organization_edit="ngModel" [(ngModel)]="organization_type_id"
                    (ngModelChange)="onOrganizationTypeChange()">
                    <mat-option *ngFor="let item of organization_types" [value]="item.value">{{ item.viewValue }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="cm_fltr_sc mr_1" *ngIf="is_university">
            <span>{{ organization_type_name ? organization_type_name : 'Organization List' }} </span>
            <mat-form-field appearance="outline">
                <mat-select placeholder="{{'select_text'|translate}} {{ organization_type_name }}" name="organization_list_edit"
                    #organization_list_edit="ngModel" [(ngModel)]="organization_list_id"
                    (ngModelChange)="selected_name='university_id';selected_value=organization_list_id;getCollege(organization_type_id,0,'year')">
                    <mat-option>
                        <ngx-mat-select-search [noEntriesFoundLabel]="'no_records_found_text'|translate"
                            [placeholderLabel]="'search_text'|translate" name="search_university" ngModel
                            (ngModelChange)="searchOrganizations($event)">
                        </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of all_organization_list | async" [value]="item['pk_id']" matTooltip='{{ item["organization_name"] }}'>{{
                        item["organization_name"] }}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="cm_fltr_sc mr_1" *ngIf="is_college">
            <span>{{"admin.assessment.create.college"|translate}}</span>
            <mat-form-field appearance="outline">
                <mat-select placeholder="{{'admin.assessment.create.select_college' | translate}}"
                    name="college_edit" #college_edit="ngModel" [(ngModel)]="college_id"
                    (ngModelChange)="selected_name='college_id';selected_value=college_id;getYearSemsterGroup(organization_type_id,0,'year');doFilter();">
                    <mat-option>
                        <ngx-mat-select-search [noEntriesFoundLabel]="'no_records_found_text'|translate"
                            [placeholderLabel]="'search_text'|translate" name="search_college" ngModel
                            (ngModelChange)="searchCollege($event)">
                        </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of all_college | async" [value]="''+item['pk_id']" matTooltip='{{
                        item["organization_name"]?item["organization_name"]:item["partner_name"] }}'>{{
                        item["organization_name"]?item["organization_name"]:item["partner_name"] }}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="cm_fltr_sc mr_1">
            <span>{{"admin.assessment.create.year"|translate}}</span>
            <mat-form-field appearance="outline">
                <mat-select placeholder="{{'admin.assessment.create.select_year'|translate}}" name="year_edit"
                    #year_edit="ngModel" [(ngModel)]="year_id"
                    (ngModelChange)="selected_name='year_id';selected_value=year_id;getYearSemsterGroup(organization_type_id,year_id,'semester');doFilter();">
                    <mat-option *ngFor="let item of all_years | async" [value]="item['pk_id']">{{ item["name"] }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="cm_fltr_sc mr_1" *ngIf="show_semester_dropdown">
            <span>{{"admin.assessment.create.semester"|translate}}</span>
            <mat-form-field appearance="outline">
                <mat-select placeholder="{{'admin.assessment.create.select_semester'|translate}}"
                    name="semester_edit" #semester_edit="ngModel" [(ngModel)]="semester_id"
                    (ngModelChange)="selected_name='semester_id';selected_value=semester_id;getYearSemsterGroup(organization_type_id,semester_id,'group');doFilter();">
                    <mat-option *ngFor="let item of all_semesters | async" [value]="item['pk_id']">{{ item["name"]
                        }}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="cm_fltr_sc mr_1" *ngIf="show_group_dropdown">
            <span>{{"admin.assessment.create.group"|translate}}</span>
            <mat-form-field appearance="outline">
                <mat-select placeholder="{{'admin.assessment.create.select_group'|translate}}" name="group_edit"
                    #group_edit="ngModel" [(ngModel)]="group_id"
                    (ngModelChange)="selected_name='group_id';selected_value=group_id;">
                    <mat-option *ngFor="let item of all_groups | async" [value]="item['pk_id']">{{ item["name"] }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="cm_fltr_sc mr_1">
            <span>{{"admin.report.sudt_rpt.student_name_search"|translate}} </span>
            <mat-form-field appearance="outline" class="w_100p">
                <input matInput [(ngModel)]="student_name" #student_name_name="ngModel"
                    name="student_name_name" maxlength="50"
                    placeholder='{{"enter"|translate}} {{"admin.report.sudt_rpt.student_name"|translate}}' autocomplete="off"
                    >
                <mat-icon (click)="doFilter()" matSuffix color="accent">search</mat-icon>
            </mat-form-field>
        </div>

    </div>
    <div class="hgt_10"></div>
    <div>
        <div class="rsp_tbl">
            <table mat-table [dataSource]="dataSource" matSort>
                <ng-container matColumnDef="s_no">
                    <th mat-header-cell *matHeaderCellDef>{{"s_no_text"|translate}}</th>
                    <td mat-cell *matCellDef="let element">{{ element.s_no }}</td>
                </ng-container>
                <ng-container matColumnDef="student_name">
                    <th mat-header-cell *matHeaderCellDef>{{"admin.report.sudt_rpt.student_name"|translate}}</th>
                    <td mat-cell *matCellDef="let element">{{ element.name }}</td>
                </ng-container>
                <ng-container matColumnDef="student_email">
                    <th mat-header-cell *matHeaderCellDef>{{"admin.report.sudt_rpt.student_email"|translate}}</th>
                    <td mat-cell *matCellDef="let element">{{ element.email }}</td>
                </ng-container>
                <ng-container matColumnDef="uid">
                    <th mat-header-cell *matHeaderCellDef>{{"admin.report.sudt_rpt.uid"|translate}}</th>
                    <td mat-cell *matCellDef="let element">{{ element.uuid }}</td>
                </ng-container>
                <ng-container matColumnDef="last_login">
                    <th mat-header-cell *matHeaderCellDef>{{"admin.report.sudt_rpt.last_login"|translate}}</th>
                    <td mat-cell *matCellDef="let element">{{ element.last_login }}</td>
                </ng-container>
                <ng-container matColumnDef="notes_accessed">
                    <th mat-header-cell *matHeaderCellDef>{{"admin.report.sudt_rpt.notes_accessed"|translate}}</th>
                    <td mat-cell *matCellDef="let element">{{ element.notes_accesed }}</td>
                </ng-container>
                <ng-container matColumnDef="videos_watched">
                    <th mat-header-cell *matHeaderCellDef>{{"admin.report.sudt_rpt.videos_watched"|translate}}</th>
                    <td mat-cell *matCellDef="let element">{{ element.videos_watched }}</td>
                </ng-container>
                <ng-container matColumnDef="zoom_class">
                    <th mat-header-cell *matHeaderCellDef>{{"admin.report.sudt_rpt.zoom_class"|translate}}</th>
                    <td mat-cell *matCellDef="let element">{{ element.zoom_class }}</td>
                </ng-container>
                <ng-container matColumnDef="assessment_attended">
                    <th mat-header-cell *matHeaderCellDef>{{"admin.report.sudt_rpt.assessment_attended"|translate}}</th>
                    <td mat-cell *matCellDef="let element">{{ element.assessment_attended }}</td>
                </ng-container>
                <ng-container matColumnDef="subject_knowledge">
                    <th mat-header-cell *matHeaderCellDef>{{"admin.report.sudt_rpt.subject_knowledge"|translate}}</th>
                    <td mat-cell *matCellDef="let element">
                        <span color="accent" (click)="openSubjectKnowledgeModel(element)" class="primary_color">{{"admin.report.sudt_rpt.view_details"|translate}}</span>
                        <!-- <button mat-icon-button color="accent">
                            <mat-icon routerLink="/admin/reports/assessment-report/{{element.pk_id}}/{{element.assessment_key}}/{{organization_type_id}}/{{organization_list_id}}/{{college_id}}/{{year_id}}/{{semester_id}}/{{group_id}}" matTooltip="{{'click_to_view_report_text'|translate}}">visibility</mat-icon>
                        </button> -->
                    </td>
                </ng-container>
                
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                <tr class="mat-row no_rcrds_fd" *matNoDataRow>
                    <td class="mat-cell" colspan="9">{{"no_records_found_text"|translate}}</td>
                </tr>
            </table>
        </div>
        <mat-paginator [pageSizeOptions]="page_size_options" [length]="totalSize" showFirstLastButtons (page)="getServerData($event)">
        </mat-paginator>
    </div>
</div>