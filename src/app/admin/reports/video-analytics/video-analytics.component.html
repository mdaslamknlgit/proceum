<div class="mn_dshbrd">
    <div class="brd_crm">{{"proceum_text"|translate}} &nbsp;&raquo; <strong>{{"admin.side_menu.video_analytics"|translate}}</strong></div>
    <div class="pg_ttl">{{"admin.side_menu.video_analytics"|translate}}</div>
    <div class="dsh_brd_crds inputs_wdth_200">
    	<div class="cm_fltr_sc mr_1">
            <div class="crt_prt_hd">{{"admin.report.video_analytics.video_type"|translate}}</div>
            <mat-form-field appearance="outline" class="w_100p">
                <mat-select placeholder='{{"admin.report.video_analytics.select_video_type"|translate}}' name="video_type_id" [(ngModel)]="video_type_id" (ngModelChange)="applyFilters()">
                	<mat-option [value]="">{{"admin.report.order_list.all"|translate}}</mat-option>
                    <mat-option *ngFor="let video_type of all_video_types | async" [value]="video_type['value']">{{
                        video_type["value"] }}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="cm_fltr_sc mr_1">
            <span>{{"admin.report.order_list.duration"|translate}}</span>
            <mat-form-field appearance="outline">
                <mat-select placeholder="Select Duration" name="duration" [(ngModel)]="duration" (ngModelChange)="applyFilters()">
                    <mat-option [value]="">{{"admin.report.order_list.all"|translate}}</mat-option>
                    <mat-option [value]="'today'">{{"admin.report.order_list.today"|translate}}</mat-option>
                    <mat-option [value]="'this_week'">{{"admin.report.order_list.this_week"|translate}}</mat-option>
                    <mat-option [value]="'this_month'">{{"admin.report.order_list.this_month"|translate}}</mat-option>
                    <mat-option [value]="'3'">{{"admin.report.order_list.3months"|translate}}</mat-option>
                    <mat-option [value]="'6'">{{"admin.report.order_list.6months"|translate}}</mat-option>
                    <mat-option [value]="'9'">{{"admin.report.order_list.9months"|translate}}</mat-option>
                    <mat-option [value]="'this_year'">{{"admin.report.order_list.1year"|translate}}</mat-option>
                    <mat-option [value]="'date_range'">{{"admin.report.order_list.date_range"|translate}}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="cm_fltr_sc mr_1 {{date_range_fltr == false ? 'd_none':''}}">
            <div class="crt_prt_hd">{{"admin.report.order_list.date_range"|translate}}</div>
            <mat-form-field appearance="outline">
              <mat-date-range-input [rangePicker]="picker">
                <input matStartDate placeholder='{{"admin.report.order_list.start_date"|translate}}' [(ngModel)]="from_date" (dateChange)="fromdateChange()" readonly>
                <input matEndDate placeholder='{{"admin.report.order_list.end_date"|translate}}' [(ngModel)]="to_date" (dateChange)="todateChange()" [disabled]="is_todate" readonly>
              </mat-date-range-input>
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-date-range-picker #picker></mat-date-range-picker>
            </mat-form-field>
        </div>      
        
        <div class="cm_fltr_sc mr_1"> <span>{{"search_text"|translate}}</span>
            <mat-form-field appearance="outline" class="w_100p">
                <input matInput [(ngModel)]="search_txt" (keyup)="$event.keyCode == 13 ? applyFilters() : ''"
                    placeholder='{{"admin.report.video_analytics.search_student"|translate}}' />
                <mat-icon (click)="applyFilters()" matSuffix color="accent">search</mat-icon>
            </mat-form-field>
        </div>
        <div class="cm_fltr_sc mr_1">
            <span>&nbsp;</span>
            <button mat-raised-button color="warn" class="float_right mr_1 btn_st_frm" (click)="resetFilters()" matTooltip='{{"reset"|translate}}'><mat-icon>restart_alt</mat-icon></button>
        </div>
       	<div class="rsp_tbl">
            <table mat-table (matSortChange)="sortData($event)" class="mat-elevation-z8" [dataSource]="dataSource" matSort>
                <ng-container matColumnDef="s_no">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header class="s_no">{{"s_no_text"|translate}}</th>
                  <td mat-cell *matCellDef="let element" class="s_no">{{ element.s_no }}</td>
                </ng-container>
                <ng-container matColumnDef="video_platform">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{"admin.report.video_analytics.video_platform"|translate}}</th>
                  <td mat-cell *matCellDef="let element">{{ element.video_platform }}
                  	<!-- <img src="getVideoImg(element.video_platform)" class="source-img">  -->
                  </td>
                </ng-container>
                <ng-container matColumnDef="student_name">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{"admin.report.video_analytics.student_name"|translate}}</th>
                  <td mat-cell *matCellDef="let element"> {{ element.student_name }} </td>
                </ng-container>
                <ng-container matColumnDef="student_email">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{"admin.report.video_analytics.student_email"|translate}}</th>
                  <td mat-cell *matCellDef="let element">{{ element.student_email }}</td>
                </ng-container>
                <ng-container matColumnDef="created_at">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{"admin.report.video_analytics.last_viewed"|translate}}</th>
                  <td mat-cell *matCellDef="let element">{{ element.last_viewed }}</td>
                </ng-container>
                <ng-container matColumnDef="topic">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{"admin.report.video_analytics.topic"|translate}}</th>
                  <td mat-cell *matCellDef="let element"> {{ element.topic }}</td>
                </ng-container>
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef>{{"actions_text"|translate}}</th>
                    <td mat-cell *matCellDef="let element"><span class="spanlink" [routerLink]="['/index/curriculum/details/', element.curriculum_id,element.level_id,element.content_id]">{{"admin.report.order_list.view_details"|translate}}</span></td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                <tr class="mat-row no_rcrds_fd" *matNoDataRow>
                  <td class="mat-cell" [attr.colspan]="displayedColumns.length">{{"no_records_found_text"|translate}}</td>
                </tr>
            </table>
        </div>
        <mat-paginator #paginator [pageSize]="pageSize" [length]="num_rows" [pageSizeOptions]="page_size_options" [showFirstLastButtons]="true" (page)="getServerData($event)"></mat-paginator>
    </div>
</div>