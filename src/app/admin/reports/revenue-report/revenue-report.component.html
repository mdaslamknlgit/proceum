<div class="mn_dshbrd">
    <div class="brd_crm">{{"proceum_text"|translate}} &nbsp;&raquo; <strong>{{"admin.report.revenue.page_title"|translate}}</strong></div>
    <div class="pg_ttl">{{"admin.report.revenue.page_title"|translate}}</div>
    <div class="dsh_brd_crds inputs_wdth_200">
        <div class="cm_fltr_sc mr_1">
            <span>{{"admin.report.order_list.duration"|translate}}</span>
            <mat-form-field appearance="outline">
                <mat-select placeholder="Select Duration" name="duration" [(ngModel)]="duration" (ngModelChange)="applyFilters()">
                    <mat-option [value]="">{{"admin.report.order_list.all"|translate}}</mat-option>
                    <mat-option [value]="'today'">{{"admin.report.order_list.today"|translate}}</mat-option>
                    <mat-option [value]="'this_week'">{{"admin.report.order_list.this_week"|translate}}</mat-option>
                    <mat-option [value]="'this_month'">{{"admin.report.order_list.this_month"|translate}}</mat-option>
                    <mat-option [value]="'3'">{{"admin.report.order_list.3months"|translate}}</mat-option>
                    <mat-option [value]="'6'">{{"admin.report.order_list.6months"|translate}}</mat-option>
                    <mat-option [value]="'9'">{{"admin.report.order_list.9months"|translate}}</mat-option>
                    <mat-option [value]="'this_year'">{{"admin.report.order_list.1year"|translate}}</mat-option>
                    <mat-option [value]="'date_range'">{{"admin.report.order_list.date_range"|translate}}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="cm_fltr_sc mr_1 {{date_range_fltr == false ? 'd_none':''}}">
            <div class="crt_prt_hd">{{"admin.report.order_list.date_range"|translate}}</div>
            <mat-form-field appearance="outline">
              <mat-date-range-input [rangePicker]="picker">
                <input matStartDate placeholder='{{"admin.report.order_list.start_date"|translate}}' [(ngModel)]="from_date" (dateChange)="fromdateChange()" readonly>
                <input matEndDate placeholder='{{"admin.report.order_list.end_date"|translate}}' [(ngModel)]="to_date" (dateChange)="todateChange()" [disabled]="is_todate" readonly>
              </mat-date-range-input>
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-date-range-picker #picker></mat-date-range-picker>
            </mat-form-field>
        </div>
        <div class="cm_fltr_sc mr_1">
            <div class="crt_prt_hd">{{"admin.report.order_list.country"|translate}}</div>
            <mat-form-field appearance="outline" class="w_100p">
                <mat-select placeholder='{{"partner.partners.select_country"|translate}}' name="country_id" [(ngModel)]="country_id" (ngModelChange)="applyFilters()">
                    <mat-option>
                        <ngx-mat-select-search [noEntriesFoundLabel]='"partner.partners.no_countries_found"|translate'
                            [placeholderLabel]='"partner.partners.search_country"|translate' name="search_country" ngModel
                            (ngModelChange)="filterCountries($event)"></ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let country of all_countrys | async" [value]="country['id']">{{
                        country["country_name"] }}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="cm_fltr_sc mr_1">
            <span>{{"admin.report.order_list.package"|translate}}</span>
            <mat-form-field appearance="outline" class="mr_1">
                <mat-select placeholder='{{"admin.report.revenue.select_package"|translate}}' name="package_edit" #package_edit="ngModel" [(ngModel)]="package_id" (ngModelChange)="applyFilters()">
                    <mat-option>
                        <ngx-mat-select-search [noEntriesFoundLabel]='"admin.report.revenue.no_package_found"|translate'
                            [placeholderLabel]='"admin.report.revenue.search_package"|translate' name="search_package" ngModel
                            (ngModelChange)="filterPackages($event)"></ngx-mat-select-search>
                    </mat-option>
                    <!-- <mat-option value="">All</mat-option> -->
                    <mat-option *ngFor="let package of all_packages | async" [value]="package['pk_id']">
                        {{ package["package_name"] }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <!-- <div class="cm_fltr_sc mr_1"> <span>{{"search_text"|translate}}</span>
            <mat-form-field appearance="outline" class="w_100p">
                <input matInput [(ngModel)]="search_txt" (keyup)="$event.keyCode == 13 ? applyFilters() : ''"
                    placeholder='{{"admin.report.order_list.search_orderid_txt"|translate}}' />
                <mat-icon (click)="applyFilters()" matSuffix color="accent">search</mat-icon>
            </mat-form-field>
        </div> -->
        <div class="cm_fltr_sc mr_1">
            <span>&nbsp;</span>
            <button mat-raised-button color="warn" class="float_right mr_1 btn_st_frm" (click)="resetFilters()" matTooltip='{{"reset"|translate}}'><mat-icon>restart_alt</mat-icon></button>
        </div>
        <div class="rsp_tbl">
            <table mat-table (matSortChange)="sortData($event)" class="mat-elevation-z8" [dataSource]="dataSource" matSort>
                <ng-container matColumnDef="s_no">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header class="s_no">{{"s_no_text"|translate}}</th>
                  <td mat-cell *matCellDef="let element" class="s_no">{{ element.s_no }}</td>
                </ng-container>
                <ng-container matColumnDef="order_id">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{"admin.report.order_list.order_id"|translate}}</th>
                  <td mat-cell *matCellDef="let element">{{ element.order_id }}</td>
                </ng-container>
                <ng-container matColumnDef="created_at">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{"admin.report.order_list.order_date"|translate}}</th>
                  <td mat-cell *matCellDef="let element"> {{ element.created_at }} </td>
                </ng-container>
                <ng-container matColumnDef="user_email">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{"admin.report.order_list.usr_email"|translate}}</th>
                  <td mat-cell *matCellDef="let element">{{ element.user_email }}</td>
                </ng-container>
                <ng-container matColumnDef="package_name">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{"admin.report.order_list.package"|translate}}</th>
                  <td mat-cell *matCellDef="let element">{{ element.package_name }}</td>
                </ng-container>
                <ng-container matColumnDef="paid_amount">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{"admin.report.order_list.amount"|translate}}</th>
                  <td mat-cell *matCellDef="let element">{{element.currency_symbol}} {{ element.paid_amount }}</td>
                </ng-container>
                <ng-container matColumnDef="transaction_id">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{"admin.report.order_list.transaction_id"|translate}}</th>
                  <td mat-cell *matCellDef="let element">{{ element.transaction_id }}</td>
                </ng-container>
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef>{{"actions_text"|translate}}</th>
                    <td mat-cell *matCellDef="let element"><span class="spanlink" [routerLink]="['/admin/order-details/', element.order_id]">{{"admin.report.order_list.view_details"|translate}}</span></td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                <tr class="mat-row no_rcrds_fd" *matNoDataRow>
                  <td class="mat-cell" [attr.colspan]="displayedColumns.length">{{"no_records_found_text"|translate}}</td>
                </tr>
            </table>
        </div>
        <mat-paginator #paginator [pageSize]="pageSize" [length]="num_rows" [pageSizeOptions]="page_size_options" [showFirstLastButtons]="true" (page)="getServerData($event)"></mat-paginator>
    </div>
</div>