<div class="mn_dshbrd">
  <div class="cust_mdl_par cust_mdl_50p" [ngClass]="{ cust_mdl_opn: edit_model_status }">
    <div class="cust_mdl_chl">
        <div class="pg_ttl">
          {{"admin.assessment.list.qbank"|translate}}
            <span class="spacer"></span>
            <button mat-icon-button (click)="edit_model_status = !edit_model_status">
              &#x2715;
            </button>
        </div>
        <div class="tbbd_bdy">
            <div class="mb_0 w_100p">
                <div class="hgt_20"></div>
                <div class="rsp_tbl">
                    <table mat-table [dataSource]="sujectDataSource">
                        <ng-container matColumnDef="Sno">
                            <th mat-header-cell *matHeaderCellDef> {{"s_no_text"|translate}} </th>
                            <td mat-cell *matCellDef="let element; let s_no=index"> {{s_no+1}} </td>
                            <td mat-footer-cell *matFooterCellDef> </td>
                        </ng-container>
                        <ng-container matColumnDef="Course">
                            <th mat-header-cell *matHeaderCellDef> {{"admin.assessment.create.qbank"|translate}} </th>
                            <td mat-cell *matCellDef="let element">{{element.course_qbank_text}}</td>
                            <td mat-footer-cell *matFooterCellDef> {{"admin.assessment.create.total"|translate}} </td>
                        </ng-container>
                        <ng-container matColumnDef="Topic">
                            <th mat-header-cell *matHeaderCellDef> {{"admin.assessment.create.topic_path"|translate}} </th>
                            <td mat-cell *matCellDef="let element" class="ws_normal">{{element.topic_text}} </td>
                            <td mat-footer-cell *matFooterCellDef>  </td>
                        </ng-container>
                        <ng-container matColumnDef="Count">
                          <th mat-header-cell *matHeaderCellDef> {{"admin.assessment.create.count"|translate}} </th>
                          <td mat-cell *matCellDef="let element" class="ws_normal">{{element.questions_count}} </td>
                          <td mat-footer-cell *matFooterCellDef> 
                            <mat-form-field appearance="none">
                              <input matInput [(ngModel)]="question_total" autocomplete="off">
                            </mat-form-field>
                          </td>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="subjectDisplayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: subjectDisplayedColumns;"></tr>
                        <tr class="mat-row no_rcrds_fd" *matNoDataRow>
                            <td style="text-align: center; margin: 20px" class="mat-cell"
                                [attr.colspan]="subjectDisplayedColumns.length">
                                No Records Found
                            </td>
                        </tr>
                        <tr mat-footer-row *matFooterRowDef="subjectDisplayedColumns; sticky: true"></tr>
                    </table>
                </div>
                <div class="hgt_20"></div>
            </div>
        </div>
    </div>
  </div>
    <div class="brd_crm">{{"proceum_text"|translate}} &raquo; <strong>{{"admin.assessment.list.page_title"|translate}}</strong></div>
    <div class="d-flex rsp_fw">
        <div class="pg_ttl">{{"admin.assessment.list.page_title"|translate}}</div>
        <div class="spacer"></div>
        <div>
          <button mat-raised-button color="accent" routerLink="{{ create_assessment }}">
              <mat-icon>add</mat-icon> {{"admin.assessment.create.page_title"|translate}}
          </button>
      </div>
    </div>
    <hr />
    <div class="d_flx_ac dsh_brd_crds">
      <div class="cm_fltr_sc mr_1">
        <mat-form-field appearance="outline"  class="mr_1">
          <input  matInput (keyup)="$event.keyCode == 13 ? applyFilters() : ''" [(ngModel)]="search_txt" placeholder="Search" />
          <mat-icon matSuffix class="cursor-pointer" color="accent">search</mat-icon>
        </mat-form-field>
      </div>
      <div class="cm_fltr_sc mr_1" *ngIf="is_display">
        <mat-form-field appearance="outline">
          <mat-select placeholder="Select" name="created_by" #created_by="ngModel" [(ngModel)]="created_by_id" >
            <mat-option>
                <ngx-mat-select-search [noEntriesFoundLabel]="'No Record Found'"
                    [placeholderLabel]="'Search'" name="search_user" ngModel (ngModelChange)="searchUsersList($event)">
                </ngx-mat-select-search>
            </mat-option>
            <mat-option *ngFor="let item of users_list" [value]="item['id']">{{
              item["first_name"] }}</mat-option>
        </mat-select>
        </mat-form-field>
      </div>
      <div class="cm_fltr_sc mr_1">
        <mat-form-field appearance="outline">
          <input matInput [(ngModel)]="assessment_date" name="assessment_date_name" readonly [matDatepicker]="picker"
              required placeholder='Assessment Date' autocomplete="off">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
      </div>

      

      <button mat-raised-button color="accent" class="float_right mr_1 btn_st_frm" (click)="applyFilters()" [disabled]="is_submit">
        Submit
      </button>
      <button mat-raised-button color="warn" class="float_right mr_1 btn_st_frm" (click)="resetFilters()" matTooltip="Reset">
        <mat-icon>restart_alt</mat-icon>
      </button>

    </div>
    <div class="dsh_brd_crds">
        <div class="rsp_tbl">
            <table mat-table [dataSource]="dataSource">
                <ng-container matColumnDef="Sno">
                  <th mat-header-cell *matHeaderCellDef class="text_center"> {{"s_no_text"|translate}} </th> 
                  <td mat-cell *matCellDef="let element" class="text_center"> {{element.s_no}} </td>
                </ng-container> 
                <!-- <ng-container matColumnDef="SubName">
                  <th mat-header-cell *matHeaderCellDef class="text_center"> {{"admin.assessment.list.subject_name"|translate}} </th>
                  <td mat-cell *matCellDef="let element"> {{element.subject_name}} </td>
                </ng-container>  -->
                <!-- <ng-container matColumnDef="assId">
                  <th mat-header-cell *matHeaderCellDef> {{"admin.assessment.list.assessment_id"|translate}} </th>
                  <td mat-cell *matCellDef="let element"> {{element.assessment_key}} </td>
                </ng-container>  -->
                <ng-container matColumnDef="assNme"> 
                  <th mat-header-cell *matHeaderCellDef class="text_center"> {{"admin.assessment.list.assessment_name"|translate}}</th>
                  <td mat-cell *matCellDef="let element" class="text_center"> {{element.assessment_name}} </td>
                </ng-container> 
                <ng-container matColumnDef="dtndTm">
                  <th mat-header-cell *matHeaderCellDef class="text_center"> {{"admin.assessment.list.date_time"|translate}} </th>
                  <td mat-cell *matCellDef="let element" class="text_center"> {{element.assessment_date_time}} </td>
                </ng-container> 
                <ng-container matColumnDef="qstns">
                  <th mat-header-cell *matHeaderCellDef class="text_center"> {{"admin.assessment.list.questions_count"|translate}} </th>
                  <td mat-cell *matCellDef="let element" class="text_center"> {{element.total_questions_count}} </td>
                </ng-container> 
                <ng-container matColumnDef="eqDrtn">
                  <th mat-header-cell *matHeaderCellDef class="text_center"> {{"admin.assessment.list.e_q_duration"|translate}}</th>
                  <td mat-cell *matCellDef="let element" class="text_center"> {{element.time_per_question}} </td>
                </ng-container> 
                <ng-container matColumnDef="invTd">
                  <th mat-header-cell *matHeaderCellDef class="text_center"> {{"admin.assessment.list.invited"|translate}} </th>
                  <td mat-cell *matCellDef="let element" class="text_center"> {{element.invited}}  </td>
                </ng-container>
                <ng-container matColumnDef="created_by">
                  <th mat-header-cell *matHeaderCellDef class="text_center"> {{"admin.assessment.list.created_by"|translate}} </th>
                  <td mat-cell *matCellDef="let element" class="text_center"> {{element.created_by}}  </td>
                </ng-container> 
                <!-- <ng-container matColumnDef="appeRd">
                  <th mat-header-cell *matHeaderCellDef> {{"admin.assessment.list.appeared"|translate}} </th>
                  <td mat-cell *matCellDef="let element">  </td>
                </ng-container> 
                <ng-container matColumnDef="absnTee">
                  <th mat-header-cell *matHeaderCellDef> {{"admin.assessment.list.absentee"|translate}} </th>
                  <td mat-cell *matCellDef="let element"> </td>
                </ng-container>  -->
                <ng-container matColumnDef="acTn">
                  <th mat-header-cell *matHeaderCellDef class="text_center"> {{"admin.assessment.list.actions"|translate}} </th>
                  <td mat-cell *matCellDef="let element" class="text_center"> 
                    <button mat-icon-button color="accent" type="button" (click)="openDetailsModel(element)">
                      <mat-icon matTooltip="Click to View Details">assignment</mat-icon>
                    </button>
                    <button mat-icon-button color="accent" *ngIf="element.viewStatus == 0">
                      <mat-icon routerLink="/{{role_id == 12 ? 'teacher':'admin'}}/assessment/report/{{element.pk_id}}" matTooltip="Click to View Report">visibility</mat-icon>
                    </button>
                    <button mat-icon-button disabled color="accent" *ngIf="element.viewStatus == 1">
                      <mat-icon>visibility</mat-icon>
                    </button>
                    <button mat-icon-button color="accent" *ngIf="element.editStatus == 1">
                      <mat-icon routerLink="/{{role_id == 12 ? 'teacher':'admin'}}/edit-assessment/{{element.pk_id}}/{{element.assessment_key}}" matTooltip="Click to Edit">edit_notes
                      </mat-icon>
                    </button>
                    <button mwlConfirmationPopover [popoverTitle]="'Are you sure?'" [popoverMessage]="
                        'Are you sure to delete <b>' + element.assessment_name + '</b>'
                        " placement="auto" (confirm)="deleteContentData(element.pk_id)" confirmButtonType="danger"
                        cancelButtonType="outline-secondary" mat-icon-button color="warn" matTooltip="Delete">
                        <mat-icon>remove_circle_outline</mat-icon>
                    </button>
                  </td>
                </ng-container> 

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                <tr class="mat-row no_rcrds_fd" *matNoDataRow>
                    <td class="mat-cell" [attr.colspan]="displayedColumns.length">{{"no_records_found_text"|translate}}</td>
                </tr>
              </table>
        </div>
        <mat-paginator [pageSizeOptions]="page_size_options" [length]="totalSize" showFirstLastButtons (page)="getServerData($event)">
        </mat-paginator>
    </div>
</div>